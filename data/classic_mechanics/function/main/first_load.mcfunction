
# -> Update score
scoreboard players set CM.global CM_HasCM 1

# -> If OverrideHandBook is on then return
execute if score CM.global CM_OverrideHandBook matches 1 run \
    return fail

# -> Reset the arbitrary value
scoreboard players set CM.global CM_MathDynamicValue 0

# -> Give everyone the initial "Classic Mechanics Handbook" book
execute store success score CM.global CM_MathDynamicValue run \
    give @a written_book[item_name={bold:true,color:"green",italic:false,text:"Classic Mechanics Handbook"},enchantment_glint_override=true,written_book_content={title:"",author:"Wilozyx",generation:0,pages:[[{"text":"CLASSIC MECHANICS\n","bold":true},{"text":"\n----------------","bold":true,"strikethrough":true},{"text":"\n\nHey! Thank you for installing Classic Mechanics! It's purpose is to bring back old minecraft features/tweaks! This datapack was custom made by Wilozyx with love ❤\n\n","bold":false}],[{"text":"The Handbook ","bold":true},{"text":"⭐","bold":false},{"text":"\n\nThis book is given when the pack is installed for the first time in a world/server! This is used mainly for any useful information you might want aswell as tweaking settings!","bold":false},{"text":"\n\nREMINDER!","italic":true,"underlined":true,"hover_event":{"action":"show_text","value":[{"text":">You can also use "},{"text":"/function classic_mechanics:options_message ","color":"green","italic":true},{"text":"to see the settings message!"},{"text":"\n\nYou can also click me to copy the command into your clipboard!"}]},"click_event":{"action":"copy_to_clipboard","value":"/function classic_mechanics:options_message"}}],[{"text":"Settings and Modules ","bold":true},{"text":"⛏","bold":false},{"text":"\n\nAll of the datapack's modules are disabled  by default! You can choose to toggle any of them here! ↓","bold":false},{"text":"\n\n\n\n\n[SETTINGS]","bold":true,"italic":true,"underlined":true,"hover_event":{"action":"show_text","value":[{"text":">Click to view the settings!","bold":true}]},"click_event":{"action":"run_command","command":"/function classic_mechanics:options_message"}}],[{"text":"Socials ","bold":true,"hover_event":{"action":"show_text","value":[{"text":"","bold":true}]}},{"text":"❤","bold":false,"hover_event":{"action":"show_text","value":[{"text":"","bold":true}]}},{"text":"\n\nThank you for supporting my work! You can check me out on:","bold":false,"hover_event":{"action":"show_text","value":[{"text":"","bold":true}]}},{"text":"\n[Youtube]","bold":true,"italic":true,"underlined":true,"hover_event":{"action":"show_text","value":[{"text":">Support me by subscribing!  :3","bold":true}]},"click_event":{"action":"open_url","url":"https://www.youtube.com/@wilozyx"}},{"text":"\n\n[Modrinth]","bold":true,"italic":true,"underlined":true,"hover_event":{"action":"show_text","value":[{"text":">Check out my Modrinth profile!","bold":true}]},"click_event":{"action":"open_url","url":"https://modrinth.com/user/Wilozyx"}},{"text":"\n\n[Curseforge]","bold":true,"italic":true,"underlined":true,"hover_event":{"action":"show_text","value":[{"text":">Check out my Curseforge profile!","bold":true}]},"click_event":{"action":"open_url","url":"https://www.curseforge.com/members/wilozyx/projects"}},{"text":"\n\n[PMC]","bold":true,"italic":true,"underlined":true,"hover_event":{"action":"show_text","value":[{"text":">Check out my Planet Minecraft page!","bold":true}]},"click_event":{"action":"open_url","url":"https://www.planetminecraft.com/member/wilozyx/"}}],[{"text":"Suggestions and Reports","bold":true,"hover_event":{"action":"show_text","value":[{"text":"","bold":true}]}},{"text":" 🪓","bold":false},{"text":"\n\nDo you have any suggestions? Maybe some bug reports?\n\nIn any case, feel free to contact me on discord ","bold":false},{"text":"(@: wilozyxx)","bold":false,"italic":true,"hover_event":{"action":"show_text","value":[{"text":">You can add my username in discord: ","color":"white","bold":false},{"text":"wilozyxx","color":"#C7C7C7"},{"text":"\nfor anything you would like to talk to me about!","color":"white"}]}},{"text":"\n\nOr alternatively, go into the ","bold":false},{"text":"github page","bold":false,"italic":true,"underlined":true,"hover_event":{"action":"show_text","value":[{"text":">Click me to go into the Classic Mechanics github page!","color":"white","bold":true}]},"click_event":{"action":"open_url","url":"https://github.com/wilozyx/Classic-Mechanics"}}],[{"text":"Extra ","bold":true,"hover_event":{"action":"show_text","value":[{"text":"","bold":true}]}},{"text":"☺","bold":false,"hover_event":{"action":"show_text","value":[{"text":"","bold":true}]}},{"text":"\n\nAll my work is ","bold":false,"hover_event":{"action":"show_text","value":[{"text":"","bold":true}]}},{"text":"fully","bold":false,"italic":true,"underlined":true,"hover_event":{"action":"show_text","value":[{"text":"","bold":true}]}},{"text":" public property! You may use, edit, tweak, re-do, etc, this datapack and anything else I've done for whatever you need & want! Have fun! Hope you like it!\n\n<3","bold":false,"hover_event":{"action":"show_text","value":[{"text":"","bold":true}]}}]]}] 1

# -> If no players received the book then loop
execute if score CM.global CM_MathDynamicValue matches 0 run \
    schedule function classic_mechanics:main/first_load 2s
